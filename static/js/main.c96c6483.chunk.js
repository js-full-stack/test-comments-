(this["webpackJsonptest-comments-"]=this["webpackJsonptest-comments-"]||[]).push([[0],{103:function(e,t,n){},104:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(8),o=n.n(c),i=n(17),s=n.n(i),u=n(28),l=n(45),m=n(21),p=n(140),d=n(141),b=n(135),j=n(150),f=n(147),x=n(7),h=Object(b.a)({form:{display:"flex",flexDirection:"column",alignItems:"start",marginTop:"30px"},input:{marginBottom:"15px",width:"320px"},button:{marginBottom:"10px",width:"120px"}}),O=function(e){var t=e.onSubmit,n=h(),r=Object(a.useState)(""),c=Object(m.a)(r,2),o=c[0],i=c[1],s=Object(a.useState)(""),u=Object(m.a)(s,2),l=u[0],b=u[1];return Object(x.jsxs)("form",{className:n.form,onSubmit:function(e){e.preventDefault(),t({name:o,text:l}),i(""),b("")},children:[Object(x.jsx)(j.a,{children:Object(x.jsx)(f.a,{onChange:function(e){i(e.target.value)},type:"text",name:"name",className:n.input,required:!0,placeholder:"Input you name",label:"Name","aria-labelledby":"user name",variant:"outlined",value:o,size:"medium"})}),Object(x.jsx)(j.a,{children:Object(x.jsx)(f.a,{onChange:function(e){b(e.target.value)},type:"text",name:"comment",className:n.input,value:l,required:!0,placeholder:"Input your comment",id:"outlined-multiline-static",label:"Comment","aria-labelledby":"user comment",multiline:!0,rows:4,variant:"outlined"})}),Object(x.jsx)(p.a,{type:"submit","aria-label":"send comment",className:n.button,variant:"contained",color:"primary",size:"large",endIcon:Object(x.jsx)(d.a,{children:"send"}),children:"Send"})]})},g=n(44),v=n.n(g);v.a.defaults.baseURL="https://jordan.ashton.fashion/api";var y={getComments:function(){var e=Object(u.a)(s.a.mark((function e(){var t,n,a,r,c,o,i=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:1,n="/goods/30/comments?page=".concat(t),e.prev=2,e.next=5,v.a.get(n);case 5:return a=e.sent,r=a.data,c=r.current_page,o=r.last_page,e.abrupt("return",{data:r,last_page:o,current_page:c});case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}(),addComment:function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.post("/goods/30/comments",t);case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},w=n(149),C=n(146),N=n(148),S=Object(b.a)({Container:{maxWidth:"1200px",padding:"0 15px",margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center"}}),k=function(e){var t=e.children,n=S();return Object(x.jsx)("div",{className:n.Container,children:t})},I=n(139),_=n(142),B=n(143),W=n(144),z=n(145),L=Object(b.a)({button:{marginTop:"15px",marginBottom:"40px"},contentWrap:{width:"550px",wordWrap:"break-word",backgroundColor:"rgba(150, 147, 245, 0.5)"},dataList:{display:"grid",gridTemplateColumns:"1fr 1fr"},pagination:{marginBottom:"60px"}});var T=function(){var e=L(),t=Object(a.useState)([]),n=Object(m.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(1),i=Object(m.a)(o,2),d=i[0],b=i[1],j=Object(a.useState)(0),f=Object(m.a)(j,2),h=f[0],g=f[1],v=Object(a.useState)(!1),S=Object(m.a)(v,2),T=S[0],D=S[1];Object(a.useEffect)((function(){D(!0);y.getComments(d).then((function(e){var t=e.data,n=e.current_page,a=e.last_page;b(n),g(a),c((function(e){return[].concat(Object(l.a)(e),Object(l.a)(t.data))}))})).finally((function(){D(!1),d>1&&window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}))}),[d]);var E=function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.addComment(t).then((function(e){var t=e.config;return JSON.parse(t.data)}));case 2:n=e.sent,c([n].concat(Object(l.a)(r)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(u.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T){e.next=2;break}return e.abrupt("return",b(d));case 2:return e.next=4,y.getComments(n).then((function(e){return e.data.data}));case 4:a=e.sent,b(n),c((function(e){return e.splice(0,e.length)}),a);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(x.jsxs)(k,{children:[Object(x.jsx)(O,{onSubmit:E}),!T&&Object(x.jsx)(I.a,{className:e.dataList,children:r.map((function(t){var n=t.name,a=t.text;return Object(x.jsx)(_.a,{children:Object(x.jsxs)(B.a,{children:[Object(x.jsxs)(W.a,{className:e.contentWrap,children:["Name: ",n]}),Object(x.jsxs)(W.a,{className:e.contentWrap,children:["Comment: ",a]})]})},Object(w.a)())}))}),T&&Object(x.jsx)(z.a,{}),!T&&d!==h&&Object(x.jsx)(p.a,{size:"medium",type:"submit",variant:"outlined",color:"primary",className:e.button,"aria-label":"load more",endIcon:Object(x.jsx)(C.a,{children:"send"}),onClick:function(){b((function(e){return T?d:e+1}))},children:"Load more"}),!T&&Object(x.jsx)(N.a,{className:e.pagination,count:h,page:d,onChange:J,color:"primary",size:"large",siblingCount:2})]})};n(102),n(103);o.a.render(Object(x.jsx)(r.a.StrictMode,{children:Object(x.jsx)(T,{})}),document.getElementById("root"))}},[[104,1,2]]]);
//# sourceMappingURL=main.c96c6483.chunk.js.map